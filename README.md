# Image2019
  本仓库保存的是2019年图像传感综合实验的源代码，包含单目视觉和双目视觉的标定与测量实验、基于OpenCv和OpenGL的有标记与无标记AR实验以及实时位姿实验共7个部分。开发环境为`VS2019`，`OpenCv`版本为`4.1.0`。
注：程序中AR部分和位姿估计部分通过变量useLocalImg可设置图像获取位置，useLocalImg = 1时使用本地图像，useLocalImg = 0时通过ipCamera读取图像。
## 1. 单目标定实验
  该程序基于OpenCv的单目摄像机标定例程，删减了一些不必要的步骤和输入输出等。
## 2. 单目测量实验
  单目测量首先求得待测物体所在平面关于摄像机坐标系的旋转平移矢量，然后通过矩阵运算将图像坐标系上的点反向投影到该平面，从而求得该点在世界坐标系的3D位置，然后通过对应的几何关系求得待测物体的尺寸。这里利用实验1中标定的单目摄像机测量笔记本电脑的对角线尺寸，测量的相对误差<1%。
## 3. 双目标定实验
  双目标定实验同样参考OpenCv的例程，删减了一些不必要的步骤和输入输出等。
## 4. 双目测量实验
  实验3中通过双目标定得到了两个摄像机的内参和相对关系（旋转平移矢量），根据双目视觉的关系可求得图像点在世界坐标系下的位置，从而可以测量物体的尺寸。本实验利用双目摄像机测量ipad尺寸，测量的相对误差同样<1%。
## 5. 有标记AR实验
  本实验利用已标定的摄像机，通过识别特定的标记得到该标记在世界坐标系下的位置（旋转平移），然后利用OpenGL在该位置渲染3D图形，从而达到增强现实的效果。
## 6. 无标记AR实验
  本实验原理大致和有标记AR实验相同，不同的地方在于将标记识别改为了特征匹配，因此可以实现不需要标记来求得待求平面的位置，同样利用OpenGL在该平面渲染3D图形，从而达到增强现实的效果。（这里的特征点匹配算法用到了OpenCv拓展库中的FREAK算法，因此需要安装opencv_contrib）
## 7. 实时位姿估计实验
  本实验利用已标定的摄像机，通过识别自己设计的标记，求得该标记所在平面的位置，从而得到摄像机在世界坐标系的位置，然后利用OpenGL绘制出摄像机在空间中的位置。

  
